import subprocess
import ssh_config
import telnet_config

def check_process(process_name):
    try:
        result = subprocess.run(['ps', 'aux'], capture_output=True, text=True)
        filtered_processes = subprocess.run(['grep', process_name], input=result.stdout, text=True, capture_output=True)
        return bool(filtered_processes.stdout.strip())
    except Exception as e:
        print(f"Error checking processes: {e}")
        return False

def main(os_type):
    print("")
    print("======================= U-01 root 원격 접속 차단 =========================")
    ssh_running = check_process('ssh')
    telnet_running = check_process('telnet')
    
    if ssh_running:
        print(f"    SSH is running: {ssh_running}")
        ssh_config.main(os_type)
    else:
        print("    SSH is not running")
        
    if telnet_running:
        print(f"    Telnet is running: {telnet_running}")
        telnet_config.main(os_type)
    else:
        print("    Telnet is not running")




